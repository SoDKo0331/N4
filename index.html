<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undercover –¢–æ–≥–ª–æ–æ–º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
            padding: 30px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .quick-add {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-add input {
            flex: 1;
        }

        .quick-add button {
            width: auto;
            padding: 12px 20px;
            margin: 0;
        }

        .member-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
            padding: 10px;
        }

        .member-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .member-name {
            font-weight: 600;
            color: #333;
        }

        .remove-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .word-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .word-card.hidden {
            background: #333;
        }

        .word-card h2 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .word-card p {
            font-size: 16px;
            opacity: 0.9;
        }

        .player-turn {
            text-align: center;
            margin-bottom: 20px;
            font-size: 20px;
            color: #667eea;
            font-weight: 600;
        }

        .game-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .game-info p {
            margin: 5px 0;
            color: #666;
        }

        .game-info strong {
            color: #333;
        }

        .role-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 10px;
        }

        .role-civilian {
            background: #48dbfb;
            color: white;
        }

        .role-undercover {
            background: #ff6348;
            color: white;
        }

        .role-mrwhite {
            background: #222;
            color: white;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            text-align: center;
        }

        .stat-item {
            flex: 1;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .word-card h2 {
                font-size: 24px;
            }

            .btn {
                padding: 12px;
                font-size: 14px;
            }

            .stat-number {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- “Æ–Ω–¥—Å—ç–Ω —Ü—ç—Å -->
        <div id="screen-main" class="screen active">
            <h1>üïµÔ∏è Undercover –¢–æ–≥–ª–æ–æ–º</h1>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number">22</div>
                    <div class="stat-label">“Æ–≥–∏–π–Ω —Å–∞–Ω</div>
                </div>
            </div>

            <button class="btn btn-success" onclick="showScreen('screen-players')">üéÆ –¢–æ–≥–ª–æ–æ–º —ç—Ö–ª“Ø“Ø–ª—ç—Ö</button>
        </div>

        <!-- –¢–æ–≥–ª–æ–≥—á –æ—Ä—É—É–ª–∞—Ö -->
        <div id="screen-players" class="screen">
            <h1>üéÆ –¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–∞—Ö</h1>
            
            <div class="quick-add">
                <input type="text" id="playerName" placeholder="–¢–æ–≥–ª–æ–≥—á–∏–π–Ω –Ω—ç—Ä...">
                <button class="btn" onclick="addPlayer()">–ù—ç–º—ç—Ö</button>
            </div>

            <div class="game-info">
                <p><strong>–¢–æ–≥–ª–æ–≥—á–∏–¥:</strong> <span id="playerCount">0</span></p>
            </div>

            <div class="member-list" id="playerList"></div>

            <button class="btn btn-success" onclick="goToSettings()" id="continueBtn" style="display: none;">“Æ—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç—Ö</button>
            <button class="btn btn-secondary" onclick="showScreen('screen-main')">–ë—É—Ü–∞—Ö</button>
        </div>

        <!-- –¢–æ—Ö–∏—Ä–≥–æ–æ -->
        <div id="screen-settings" class="screen">
            <h1>‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ</h1>
            
            <div class="game-info">
                <p><strong>–¢–æ–≥–ª–æ–≥—á–∏–¥:</strong> <span id="gamePlayers">0</span></p>
            </div>

            <div class="input-group">
                <label for="undercoverCount">Undercover —Ç–æ–≥–ª–æ–≥—á–∏–π–Ω —Ç–æ–æ:</label>
                <input type="number" id="undercoverCount" min="1" value="1">
            </div>

            <div class="input-group">
                <label for="mrWhiteCount">Mr. White —Ç–æ–≥–ª–æ–≥—á–∏–π–Ω —Ç–æ–æ:</label>
                <input type="number" id="mrWhiteCount" min="0" value="0">
            </div>

            <button class="btn" onclick="startGame()">–¢–æ–≥–ª–æ–æ–º —ç—Ö–ª“Ø“Ø–ª—ç—Ö</button>
            <button class="btn btn-secondary" onclick="showScreen('screen-players')">–ë—É—Ü–∞—Ö</button>
        </div>

        <!-- “Æ–≥ —Ö–∞—Ä—É—É–ª–∞—Ö –¥—ç–ª–≥—ç—Ü -->
        <div id="screen-word" class="screen">
            <h1>üéÆ –¢–æ–≥–ª–æ–æ–º —è–≤–∞–≥–¥–∞–∂ –±–∞–π–Ω–∞</h1>
            
            <div class="player-turn" id="currentPlayer"></div>
            
            <div class="word-card hidden" id="wordCard" onclick="revealWord()">
                <h2>üëÜ –î–∞—Ä–∂ “Ø–≥—ç—ç —Ö–∞—Ä–Ω–∞ —É—É</h2>
                <p>–ë—É—Å–∞–¥ —Ö“Ø–º“Ø“Ø—Å —Ö–∞—Ä–∞—Ö–≥“Ø–π –±–∞–π—Ö—ã–≥ –∞–Ω—Ö–∞–∞—Ä–Ω–∞ —É—É!</p>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="nextPlayer()" id="nextBtn" style="display: none;">–î–∞—Ä–∞–∞–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á</button>
                <button class="btn btn-secondary" onclick="finishGame()">–¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–≥–∞—Ö</button>
            </div>
        </div>

        <!-- –î“Ø–Ω —Ö–∞—Ä—É—É–ª–∞—Ö –¥—ç–ª–≥—ç—Ü -->
        <div id="screen-results" class="screen">
            <h1>üìä –¢–æ–≥–ª–æ–æ–º—ã–Ω –¥“Ø–Ω</h1>
            
            <div id="resultsContent"></div>

            <button class="btn" onclick="playAgain()">–î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö</button>
            <button class="btn btn-secondary" onclick="showScreen('screen-main')">“Æ–Ω–¥—Å—ç–Ω —Ü—ç—Å</button>
        </div>
    </div>

    <script>
        // “Æ–≥–∏–π–Ω —Å–∞–Ω (22 “Ø–≥)
        const wordBank = [
            'Baasanjargal Otgonbayr',
            'Anar Chinbat',
            'Ankhaa Ankhbayr',
            'Anujin Davaadorj',
            'Ariunjargal Tse',
            'Ulziijargal Battvshin',
            'Chingaral Gantumur',
            'Hatake Tergel',
            'Dolugeno',
            'Gan Od',
            'Gangan Togs',
            'Javkhaa Ariunbold',
            'Tsend Ulambayar',
            'Maralgoo Ganbulgan',
            'Munkhaldar Otgontur',
            'Nomuka',
            'Orgil',
            'Sanchirmaa Bukhbold',
            'Soko',
            'Teshka Sama',
            'Guldur',
            'Trjvkhln'
        ];

        let players = [];
        let currentPlayerIndex = 0;
        let gameData = null;

        // –¢–æ–≥–ª–æ–≥—á –Ω—ç–º—ç—Ö
        function addPlayer() {
            const input = document.getElementById('playerName');
            const name = input.value.trim();
            
            if (name === '') {
                alert('–ù—ç—Ä—ç—ç –æ—Ä—É—É–ª–Ω–∞ —É—É!');
                return;
            }

            if (players.includes(name)) {
                alert('–≠–Ω—ç –Ω—ç—Ä –∞–ª—å —Ö—ç–¥–∏–π–Ω –±–∞–π–Ω–∞!');
                return;
            }

            players.push(name);
            input.value = '';
            updatePlayerList();
        }

        // –¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç —à–∏–Ω—ç—á–ª—ç—Ö
        function updatePlayerList() {
            const list = document.getElementById('playerList');
            const countElement = document.getElementById('playerCount');
            const continueBtn = document.getElementById('continueBtn');
            
            countElement.textContent = players.length;

            if (players.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üéÆ</div><p>–¢–æ–≥–ª–æ–≥—á–¥—ã–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É</p></div>';
                continueBtn.style.display = 'none';
                return;
            }

            list.innerHTML = players.map((name, index) => `
                <div class="member-item">
                    <span class="member-name">${index + 1}. ${name}</span>
                    <button class="remove-btn" onclick="removePlayer(${index})">–£—Å—Ç–≥–∞—Ö</button>
                </div>
            `).join('');

            continueBtn.style.display = 'block';
        }

        // –¢–æ–≥–ª–æ–≥—á —É—Å—Ç–≥–∞—Ö
        function removePlayer(index) {
            players.splice(index, 1);
            updatePlayerList();
        }

        // –¢–æ—Ö–∏—Ä–≥–æ–æ —Ä—É—É —à–∏–ª–∂–∏—Ö
        function goToSettings() {
            if (players.length < 3) {
                alert('–•–∞–º–≥–∏–π–Ω –±–∞–≥–∞–¥–∞–∞ 3 —Ç–æ–≥–ª–æ–≥—á —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π!');
                return;
            }

            document.getElementById('gamePlayers').textContent = players.length;
            showScreen('screen-settings');
        }

        // –¢–æ–≥–ª–æ–æ–º —ç—Ö–ª“Ø“Ø–ª—ç—Ö
        function startGame() {
            const undercoverCount = parseInt(document.getElementById('undercoverCount').value);
            const mrWhiteCount = parseInt(document.getElementById('mrWhiteCount').value);

            if (undercoverCount + mrWhiteCount >= players.length) {
                alert('Undercover –±–æ–ª–æ–Ω Mr. White —Ç–æ–≥–ª–æ–≥—á–¥—ã–Ω –Ω–∏–π–ª–±—ç—Ä –Ω–∏–π—Ç —Ç–æ–≥–ª–æ–≥—á–æ–æ—Å –±–∞–≥–∞ –±–∞–π—Ö —ë—Å—Ç–æ–π!');
                return;
            }

            // “Æ–≥–∏–π–Ω —Å–∞–Ω–≥–∞–∞—Å —Å–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π 2 “Ø–≥ —Å–æ–Ω–≥–æ—Ö (Civilian –±–∞ Undercover-–¥)
            const shuffledWords = [...wordBank].sort(() => Math.random() - 0.5);
            const civilianWord = shuffledWords[0];
            const undercoverWord = shuffledWords[1];

            // –î“Ø—Ä“Ø“Ø–¥–∏–π–≥ —Å–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π –±–∞–π–¥–ª–∞–∞—Ä —Ö—É–≤–∞–∞—Ä–∏–ª–∞—Ö
            const roles = [];
            for (let i = 0; i < undercoverCount; i++) roles.push('undercover');
            for (let i = 0; i < mrWhiteCount; i++) roles.push('mrwhite');
            for (let i = 0; i < players.length - undercoverCount - mrWhiteCount; i++) roles.push('civilian');

            // –•–æ–ª–∏—Ö
            for (let i = roles.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [roles[i], roles[j]] = [roles[j], roles[i]];
            }

            gameData = {
                players: players.map((name, index) => ({
                    name: name,
                    role: roles[index],
                    word: roles[index] === 'civilian' ? civilianWord : 
                          roles[index] === 'undercover' ? undercoverWord : null
                })),
                civilianWord: civilianWord,
                undercoverWord: undercoverWord
            };

            currentPlayerIndex = 0;
            showNextPlayer();
            showScreen('screen-word');
        }

        // –î–∞—Ä–∞–∞–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á —Ö–∞—Ä—É—É–ª–∞—Ö
        function showNextPlayer() {
            const player = gameData.players[currentPlayerIndex];
            document.getElementById('currentPlayer').textContent = 
                `–¢–æ–≥–ª–æ–≥—á: ${player.name} (${currentPlayerIndex + 1}/${gameData.players.length})`;
            
            const card = document.getElementById('wordCard');
            card.classList.add('hidden');
            card.innerHTML = '<h2>üëÜ –î–∞—Ä–∂ “Ø–≥—ç—ç —Ö–∞—Ä–Ω–∞ —É—É</h2><p>–ë—É—Å–∞–¥ —Ö“Ø–º“Ø“Ø—Å —Ö–∞—Ä–∞—Ö–≥“Ø–π –±–∞–π—Ö—ã–≥ –∞–Ω—Ö–∞–∞—Ä–Ω–∞ —É—É!</p>';
            
            document.getElementById('nextBtn').style.display = 'none';
        }

        // “Æ–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
        function revealWord() {
            const card = document.getElementById('wordCard');
            if (!card.classList.contains('hidden')) return;

            const player = gameData.players[currentPlayerIndex];
            card.classList.remove('hidden');

            if (player.role === 'civilian') {
                card.style.background = 'linear-gradient(135deg, #48dbfb 0%, #0abde3 100%)';
                card.innerHTML = `
                    <h2>${player.word}</h2>
                    <span class="role-badge role-civilian">–≠–Ω–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á</span>
                `;
            } else if (player.role === 'undercover') {
                card.style.background = 'linear-gradient(135deg, #ff6348 0%, #ff4757 100%)';
                card.innerHTML = `
                    <h2>${player.word}</h2>
                    <span class="role-badge role-undercover">Undercover</span>
                `;
            } else {
                card.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                card.innerHTML = `
                    <h2>‚ùì</h2>
                    <p>–¢–∞ —è–º–∞—Ä —á “Ø–≥ –º—ç–¥—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞</p>
                    <span class="role-badge role-mrwhite">Mr. White</span>
                `;
            }

            document.getElementById('nextBtn').style.display = 'block';
        }

        // –î–∞—Ä–∞–∞–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á —Ä—É—É —à–∏–ª–∂–∏—Ö
        function nextPlayer() {
            currentPlayerIndex++;
            if (currentPlayerIndex >= gameData.players.length) {
                finishGame();
            } else {
                showNextPlayer();
            }
        }

        // –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–≥–∞—Ö
        function finishGame() {
            const content = document.getElementById('resultsContent');
            
            content.innerHTML = `
                <div class="game-info">
                    <p><strong>–≠–Ω–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á–¥—ã–Ω “Ø–≥:</strong> ${gameData.civilianWord}</p>
                    <p><strong>Undercover —Ç–æ–≥–ª–æ–≥—á–¥—ã–Ω “Ø–≥:</strong> ${gameData.undercoverWord}</p>
                </div>
                ${gameData.players.map(player => `
                    <div class="member-item">
                        <div>
                            <div class="member-name">${player.name}</div>
                            ${player.role === 'civilian' ? '<span class="role-badge role-civilian">–≠–Ω–≥–∏–π–Ω —Ç–æ–≥–ª–æ–≥—á</span>' : ''}
                            ${player.role === 'undercover' ? '<span class="role-badge role-undercover">Undercover</span>' : ''}
                            ${player.role === 'mrwhite' ? '<span class="role-badge role-mrwhite">Mr. White</span>' : ''}
                        </div>
                    </div>
                `).join('')}
            `;

            showScreen('screen-results');
        }

        // –î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö
        function playAgain() {
            players = [];
            gameData = null;
            currentPlayerIndex = 0;
            showScreen('screen-main');
        }

        // –î—ç–ª–≥—ç—Ü —Å–æ–ª–∏—Ö
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');

            // –¢–æ–≥–ª–æ–≥—á –æ—Ä—É—É–ª–∞—Ö –¥—ç–ª–≥—ç—Ü —Ä“Ø“Ø –æ—Ä–æ—Ö–¥–æ–æ —à–∏–Ω—ç—á–ª—ç—Ö
            if (screenId === 'screen-players') {
                updatePlayerList();
            }
        }
    </script>
</body>
</html>
